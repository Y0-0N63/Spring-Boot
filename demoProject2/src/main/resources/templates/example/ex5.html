<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>타임리프 예제 5</title>
    <style>
      .red {
        color: red;
      }

      .green {
        color: green;
      }

      .deco {
        text-decoration: underline;
      }
    </style>
  </head>
  <body>
    <h1>타임리프 예제 5</h1>

    <h3>th:inline="javascript" 속성</h3>
    <pre>
- script 태그에 작성하는 속성
- 타임리프 문법으로 출력된 내용/값을 JS에 알맞은 타입으로 변환
    </pre>

    <h3 id="message"></h3>
    <h3 id="num1"></h3>

    <hr />

    <h3>th:classappend 속성 - 요소에 class 속성값을 동적으로 추가</h3>
    <h4 class="red" th:classappend="deco">th:classappend 테스트 중...</h4>
    <!-- gt(greater than, >), lt(less than, <) -->
    <h4 class="deco" th:classappend="${num1 gt 10000} ? green : red">
      th:classappend 테스트 중...
    </h4>

    <hr>

    <h3>안전 탐색 연산자 ${객체?.필드}</h3>
    <pre>
객체가 null인지 판단 후 null이 아닌 경우에 수행
    </pre>

    <!-- EL1007E: Property or field 'memberNo' cannot be found on null (memberNo가 존재하지 않음!)-->
    <h4 th:text="${member?.memberNo}">회원번호</h4>
    <h4 th:text="${std?.studentNo}">학번</h4>

    <hr>

    <h3>번호 발생기 : ${#numbers.sequence(시작, 끝 [, step])}</h3>
    <pre>
- 시작부터 끝까지 번호로만 이루어진 숫자 배열 생성
ex) ${#numbers.sequence(1, 5)} => [1, 2, 3, 4, 5]

[사용하는 이유]
- 타임리프의 반복문인 th:each는 향상된 for문 형태로 일반 for문(시작과 끝, 증가 간격을 지정해 반복)의 동작을 하지 못하기 때문에 이를 해결하기 위해 사용
> th:each와 sequence를 함께 이용하곤 함
#numbers : thymeleaf의 내장 객체
    </pre>

    <ul>
      <!-- 11~20, 2씩 증가하며 li 태그 생성 및 출력 > 11, 13, 15, 17, 19
        1. 11...19로 이루어진 배열 생성 [11, 13, 15, 17, 19] (sequence)
        2. 생성된 배열을 대상으로 반복하며 li 태그 생성 (th:each) -->
        <li th:each = "i : ${#numbers.sequence(11, 20, 2)}"
          th:text = "|테스트 ${i}|"></li>
    </ul>

    <script th:inline="javascript">
      // 타임리프에서 javascript 코드를 동적으로 처리할 수 있도록 해줌
      // == 스크립트 태그 내부에서 타임리프의 변수나 연산을 사용할 수 있도록 함
      // html문만을 단독실행할 경우, 변수에 아무 값이 할당되지 않았으므로(타임리프 문법은 주석 처리) 이때 출력할 값 작성해야("메... 값", 100...)
      const message = /*[[${message}]]*/ "message 값";
      const num1 = /*[[${num1}]]*/ 100;

      document.querySelector("#message").innerText = message;
      document.querySelector("#num1").innerText = num1;
    </script>
  </body>
</html>
